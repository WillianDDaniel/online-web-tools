import"./main-S49h71PB.js";document.addEventListener("DOMContentLoaded",function(){const f=document.getElementById("textA"),u=document.getElementById("textB"),k=document.getElementById("countA"),D=document.getElementById("countB"),L=document.getElementById("compareButton"),S=document.getElementById("clearButton"),M=document.getElementById("swapTexts"),N=document.getElementById("highlightDiff"),I=document.getElementById("resultContainer"),E=document.getElementById("resultTitle"),w=document.getElementById("similarityBar"),T=document.getElementById("similarityPercentage"),C=document.getElementById("differencesSection"),y=document.getElementById("differencesList"),$=document.getElementById("ignoreCase"),P=document.getElementById("ignoreSpaces"),H=document.getElementById("ignorePunctuation"),j=document.getElementById("ignoreAccents");f.addEventListener("input",B),u.addEventListener("input",B),L.addEventListener("click",A),S.addEventListener("click",O),M.addEventListener("click",V),N.addEventListener("click",z);function B(){k.textContent=`${f.value.length} caracteres`,D.textContent=`${u.value.length} caracteres`}function O(){f.value="",u.value="",B(),I.classList.remove("visible"),C.classList.remove("visible"),f.classList.remove("highlighted"),u.classList.remove("highlighted")}function V(){const l=f.value;f.value=u.value,u.value=l,B(),f.classList.add("pulse"),u.classList.add("pulse"),setTimeout(()=>{f.classList.remove("pulse"),u.classList.remove("pulse")},600)}function z(){if(f.value.trim()===""||u.value.trim()===""){alert("Por favor, preencha ambos os textos para destacar as diferenças.");return}const l=f.value,n=u.value;A(),b(l,n)}function g(l){let n=l;return $.checked&&(n=n.toLowerCase()),P.checked&&(n=n.replace(/\s+/g,"")),H.checked&&(n=n.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"")),j.checked&&(n=n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),n}function A(l=!1){const n=f.value,c=u.value;if(n.trim()===""||c.trim()===""){alert("Por favor, preencha ambos os textos para comparar.");return}const d=g(n),i=g(c),t=F(d,i);I.classList.add("visible"),L.classList.add("pulse"),setTimeout(()=>L.classList.remove("pulse"),600),d===i?(E.textContent="✓ Os textos são idênticos!",E.className="result-title identical",w.style.width="100%",T.textContent="100%",C.classList.remove("visible")):(E.textContent="✗ Os textos são diferentes",E.className="result-title different",w.style.width="0%",setTimeout(()=>{w.style.width=`${t}%`,T.textContent=`${t.toFixed(2)}%`},100),R(n,c,d,i,l))}function F(l,n){const c=l.length,d=n.length;if(c===0&&d===0)return 100;if(c===0||d===0)return 0;const i=new Int32Array(c+1),t=new Int32Array(c+1);let s=i,e=t;for(let r=0;r<=c;r++)s[r]=r;for(let r=1;r<=d;r++){e[0]=r;for(let a=1;a<=c;a++){const h=l[a-1]===n[r-1]?0:1;e[a]=Math.min(e[a-1]+1,s[a]+1,s[a-1]+h)}[s,e]=[e,s]}const o=s[c],p=Math.max(c,d);return console.log("Distance:",o),(p-o)/p*100}function R(l,n,c,d,i){if(C.classList.add("visible"),y.innerHTML="",i){b(l,n);return}const t=Y(l,n),s=Math.min(5,t.length);for(let e=0;e<s;e++){const o=document.createElement("div");o.className="difference-item";const p=t[e];o.innerHTML=`
        <strong>Diferença ${e+1}:</strong>
        <span class="difference-original">${p.original}</span>
        <span class="difference-modified">${p.modified}</span>
      `,y.appendChild(o)}if(t.length>5){const e=document.createElement("p");e.textContent=`E mais ${t.length-5} diferenças encontradas.`,e.style.textAlign="center",e.style.marginTop="1rem",y.appendChild(e)}if(t.length>0){const e=document.createElement("button");e.textContent="Ver textos lado a lado",e.className="compare-button",e.style.marginTop="1rem",e.style.backgroundColor="#3a56d4",e.onclick=function(){b(l,n)},y.appendChild(e)}}function Y(l,n,c,d){const i=l.split(/\s+/),t=n.split(/\s+/),s=[];let e=0,o=0;for(;e<i.length||o<t.length;){let p=e<i.length?g(i[e]):null,r=o<t.length?g(t[o]):null;if(p===r)e++,o++;else{let a=!1,h=e+1,v=o+1;const x=5;for(let m=1;m<=x;m++){if(e+m<i.length&&g(i[e+m])===r){h=e+m,a=!0;break}if(o+m<t.length&&p===g(t[o+m])){v=o+m,a=!0;break}}s.push({original:i.slice(e,h).join(" ")||"[nada]",modified:t.slice(o,v).join(" ")||"[nada]"}),e=h,o=v,a||(e++,o++)}}return s}function b(l,n){C.classList.add("visible"),y.innerHTML="";const c=l.split(`
`),d=n.split(`
`),i=document.createElement("div");i.className="diff-container",i.style.display="flex",i.style.gap="1rem",i.style.marginTop="1rem";const t=document.createElement("div");t.className="diff-view",t.style.flex="1",t.style.padding="1rem",t.style.border="1px solid #ddd",t.style.borderRadius="5px",t.style.background="#f9f9f9",t.style.whiteSpace="pre-wrap",t.style.maxHeight="400px",t.style.overflowY="auto";const s=document.createElement("div");s.className="diff-view",s.style.flex="1",s.style.padding="1rem",s.style.border="1px solid #ddd",s.style.borderRadius="5px",s.style.background="#f9f9f9",s.style.whiteSpace="pre-wrap",s.style.maxHeight="400px",s.style.overflowY="auto";const e=document.createElement("h4");e.textContent="Texto Original",e.style.marginBottom="10px";const o=document.createElement("h4");o.textContent="Texto Comparativo",o.style.marginBottom="10px",t.appendChild(e),s.appendChild(o);const p=Math.max(c.length,d.length);for(let a=0;a<p;a++){const h=a<c.length?c[a]:"",v=a<d.length?d[a]:"",x=document.createElement("div"),m=document.createElement("div");x.style.padding="2px 0",m.style.padding="2px 0";const J=g(h),_=g(v);J!==_&&(x.style.backgroundColor="#ffecb3",m.style.backgroundColor="#ffecb3"),x.textContent=h,m.textContent=v,t.appendChild(x),s.appendChild(m)}i.appendChild(t),i.appendChild(s),y.appendChild(i);const r=document.createElement("h4");r.className="differences-title",r.textContent="Visualização das diferenças:",y.insertBefore(r,i),l.classList.add("highlighted"),n.classList.add("highlighted")}B()});
